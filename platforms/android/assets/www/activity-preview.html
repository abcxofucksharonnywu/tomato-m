<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="css/framework7.ios.min.css">
    <link rel="stylesheet" href="css/framework7.ios.colors.min.css">
    <link rel="stylesheet" href="css/iconfont.css">
    <link rel="stylesheet" href="css/kitchen-sink.ios.css">
    <script type="text/javascript " src="js/jquery.min.js "></script>
    <script type="text/javascript " src="js/jquery.transit.min.js "></script>
    <script type="text/javascript " src="js/vue.min.js "></script>
  </head>
  <body>
    <div class="statusbar-overlay"></div>
    <div class="views">
      <div class="view view-main">
        <div class="navbar">
          <div class="navbar-inner">
            <div class="center fixed">活動頁</div>
          </div>
        </div>
        <div class="pages navbar-through">
          <div data-page="activity-preview" class="page">
            <div class="page-content pull-to-refresh-content">
              <div class="pull-to-refresh-layer">
                <div class="preloader"></div>
                <div class="pull-to-refresh-arrow"></div>
              </div>
              <iframe id="" v-bind:src="activity.url" frameborder="0" v-if="activity.type=='url'"></iframe>
              <div v-if="activity.type!='url'&amp;&amp;activity.layouts.length&gt;0" class="list-block">
                <ul>
                  <li v-for="layout in activity.layouts">
                    <div id="" v-bind:value="$index" class="content">
                      <div data-pagination=".swiper-pagination" data-loop="true" v-if="layout.type=='banner'" class="layout banner swiper-container swiper-init ks-demo-slider swiper-container-horizontal">
                        <div class="swiper-pagination swiper-pagination-bullets"><span v-for="item in layout.items" class="swiper-pagination-bullet"></span></div>
                        <div class="swiper-wrapper">
                          <div id="" v-bind:data-swiper-slide-index="$index" v-for="item in layout.items" class="swiper-slide"><a id="" v-on:click="onItemClick($event,item)"><img id="" v-bind:src="item.img" onerror="this.src='img/bg_image.png'"></a></div>
                        </div>
                      </div>
                      <div v-if="layout.type=='multiRect'" class="layout multiRect">
                        <div>
                          <div><a id="" v-on:click="onItemClick($event,item)"><img id="" v-bind:src="layout.items[0].img" onerror="this.src='img/bg_image.png'"></a></div>
                          <div><a id="" v-on:click="onItemClick($event,item)"><img id="" v-bind:src="layout.items[1].img" onerror="this.src='img/bg_image.png'"></a></div>
                        </div>
                        <div>
                          <div><a id="" v-on:click="onItemClick($event,item)"><img id="" v-bind:src="layout.items[2].img" onerror="this.src='img/bg_image.png'"></a></div>
                          <div><a id="" v-on:click="onItemClick($event,item)"><img id="" v-bind:src="layout.items[3].img" onerror="this.src='img/bg_image.png'"></a></div>
                          <div><a id="" v-on:click="onItemClick($event,item)"><img id="" v-bind:src="layout.items[4].img" onerror="this.src='img/bg_image.png'"></a></div>
                        </div>
                      </div>
                      <div v-if="layout.type=='rect'" class="layout rect">
                        <div><a id="" v-on:click="onItemClick($event,item)"><img id="" v-bind:src="layout.items[0].img" onerror="this.src='img/bg_image.png'"></a></div>
                      </div>
                      <div v-if="layout.type==='double'" class="layout double">
                        <div class="list-block media-list goods">
                          <ul>
                            <li v-for="item in layout.items"><a id="" v-on:click="onItemClick($event,item)" class="item-content">
                                <div class="item-media"><img id="" v-bind:src="item.goods.images[0]" onerror="this.src='img/bg_image.png'" class="lazy lazy-fadeIn ks-demo-lazy"></div>
                                <div class="item-inner">
                                  <div class="item-text text">{{item.goods.title}}</div>
                                  <div class="item-title-row">
                                    <div class="price">${{item.goods.price}}</div><i id="" v-on:click="onCartClick($event,item.goods)" class="iconfont icon-gouwuche price"></i>
                                  </div>
                                </div></a></li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
              <div v-else class="empty"><img src="img/icon_empty.png">
                <div class="des">空空如也~</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript " src="cordova.js "></script>
    <script type="text/javascript" src="js/framework7.min.js"></script>
    <script>
      var myApp = new Framework7({
          modalTitle: 'Framework7',
          animateNavBackIcon: true,
      });
      // Expose Internal DOM library
      var $$ = Dom7;
      
      // Add main view
      var mainView = myApp.addView('.view-main', {
          // Enable Dynamic Navbar for this view
          dynamicNavbar: true,
      });
      
      
      
      var el = ".page[data-page='activity-preview'] "
      
      
      
      var vue = new Vue({
          el: el,
          data: {
              activity: null
          },
          watch: {
              'activity': function (val, oldVal) {
                  this.onRefresh()
              },
          },
          methods: {
              onClick: function (event) {
                  event.preventDefault()
                  event.stopPropagation()
                  console.log('fuck')
              },
              onRefresh: function () {
                  var width = $(el + ".page-content").width()
                  var ratio = width / 375.0
                  $(el + ".page-content .banner").height(120 * ratio)
                  $(el + ".page-content .multiRect >div").height(165 * ratio)
                  $(el + ".page-content .rect >div").height(140 * ratio)
                  $(el + ".page-content .double img").height((width - 1) / 2)
                  myApp.initPageSwiper($$(el))
                  $('.content').click(this.onClick)
              }
          }
      });
    </script>
  </body>
</html>